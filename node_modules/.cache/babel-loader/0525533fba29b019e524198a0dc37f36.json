{"remainingRequest":"/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/thread-loader/dist/cjs.js!/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/babel-loader/lib/index.js!/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/src/components/ContestClassicVotingStage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/src/components/ContestClassicVotingStage.vue","mtime":1573408857478},{"path":"/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/cache-loader/dist/cjs.js","mtime":1573384218503},{"path":"/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/thread-loader/dist/cjs.js","mtime":1572617093804},{"path":"/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/babel-loader/lib/index.js","mtime":1572617092984},{"path":"/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/cache-loader/dist/cjs.js","mtime":1573384218503},{"path":"/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/vue-loader/lib/index.js","mtime":1573216109227}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport _slicedToArray from \"/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.object.entries\";\nimport _defineProperty from \"/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters, mapState, mapActions, mapMutations } from \"vuex\";\nimport ContestClassicVotingRound from \"@/components/ContestClassicVotingRound.vue\";\nexport default {\n  components: {\n    ContestClassicVotingRound: ContestClassicVotingRound\n  },\n  props: {\n    contestId: {\n      required: true,\n      type: String\n    },\n    stageId: {\n      required: true,\n      type: Number\n    }\n  },\n  computed: _objectSpread({}, mapGetters({\n    user: \"auth/authUser\"\n  }), {}, mapState({\n    contestStatus: function contestStatus(state) {\n      return state.contests.items[this.contestId].status;\n    },\n    stage: function stage(state) {\n      return state.contests.items[this.contestId].stages[this.stageId];\n    }\n  }), {\n    isStarted: function isStarted() {\n      return this.contestStatus == \"started\";\n    },\n    isOrganizer: function isOrganizer() {\n      return this.user.role == \"organizer\";\n    },\n    filteredStage: function filteredStage() {\n      var newStage = {};\n      var skip = null;\n\n      for (var _i = 0, _Object$entries = Object.entries(this.stage); _i < _Object$entries.length; _i++) {\n        var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n            roundKey = _Object$entries$_i[0],\n            round = _Object$entries$_i[1];\n\n        skip = false;\n\n        if (round.stats) {\n          for (var _i2 = 0, _Object$entries2 = Object.entries(round); _i2 < _Object$entries2.length; _i2++) {\n            var _Object$entries2$_i = _slicedToArray(_Object$entries2[_i2], 2),\n                playerKey = _Object$entries2$_i[0],\n                player = _Object$entries2$_i[1];\n\n            if (player.score == \"disqualified\") skip = true;\n          }\n\n          if (skip) continue;\n          newStage[roundKey] = round;\n        }\n      }\n\n      return newStage;\n    },\n    availableRoundsToVote: function availableRoundsToVote() {\n      return Object.keys(this.filteredStage).length == 0;\n    }\n  }),\n  methods: _objectSpread({}, mapActions(\"contests\", [\"endStage\"]), {\n    finishVotingRound: function finishVotingRound() {\n      this.endStage({\n        contestId: this.contestId,\n        stageId: this.stageId\n      });\n    }\n  })\n};",{"version":3,"sources":["ContestClassicVotingStage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,SAAA,UAAA,EAAA,QAAA,EAAA,UAAA,EAAA,YAAA,QAAA,MAAA;AACA,OAAA,yBAAA,MAAA,4CAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,yBAAA,EAAA;AAAA,GADA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,SAAA,EAAA;AAAA,MAAA,QAAA,EAAA,IAAA;AAAA,MAAA,IAAA,EAAA;AAAA,KADA;AAEA,IAAA,OAAA,EAAA;AAAA,MAAA,QAAA,EAAA,IAAA;AAAA,MAAA,IAAA,EAAA;AAAA;AAFA,GAHA;AAQA,EAAA,QAAA,oBACA,UAAA,CAAA;AACA,IAAA,IAAA,EAAA;AADA,GAAA,CADA,MAKA,QAAA,CAAA;AACA,IAAA,aADA,yBACA,KADA,EACA;AACA,aAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,KAAA,SAAA,EAAA,MAAA;AACA,KAHA;AAKA,IAAA,KALA,iBAKA,KALA,EAKA;AACA,aAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,KAAA,SAAA,EAAA,MAAA,CAAA,KAAA,OAAA,CAAA;AACA;AAPA,GAAA,CALA;AAeA,IAAA,SAfA,uBAeA;AACA,aAAA,KAAA,aAAA,IAAA,SAAA;AACA,KAjBA;AAmBA,IAAA,WAnBA,yBAmBA;AACA,aAAA,KAAA,IAAA,CAAA,IAAA,IAAA,WAAA;AACA,KArBA;AAuBA,IAAA,aAvBA,2BAuBA;AACA,UAAA,QAAA,GAAA,EAAA;AACA,UAAA,IAAA,GAAA,IAAA;;AAEA,yCAAA,MAAA,CAAA,OAAA,CAAA,KAAA,KAAA,CAAA,qCAAA;AAAA;AAAA,YAAA,QAAA;AAAA,YAAA,KAAA;;AACA,QAAA,IAAA,GAAA,KAAA;;AACA,YAAA,KAAA,CAAA,KAAA,EAAA;AACA,+CAAA,MAAA,CAAA,OAAA,CAAA,KAAA,CAAA,wCAAA;AAAA;AAAA,gBAAA,SAAA;AAAA,gBAAA,MAAA;;AACA,gBAAA,MAAA,CAAA,KAAA,IAAA,cAAA,EAAA,IAAA,GAAA,IAAA;AACA;;AACA,cAAA,IAAA,EAAA;AACA,UAAA,QAAA,CAAA,QAAA,CAAA,GAAA,KAAA;AACA;AACA;;AAEA,aAAA,QAAA;AACA,KAvCA;AAyCA,IAAA,qBAzCA,mCAyCA;AACA,aAAA,MAAA,CAAA,IAAA,CAAA,KAAA,aAAA,EAAA,MAAA,IAAA,CAAA;AACA;AA3CA,IARA;AAsDA,EAAA,OAAA,oBACA,UAAA,CAAA,UAAA,EAAA,CAAA,UAAA,CAAA,CADA;AAGA,IAAA,iBAHA,+BAGA;AACA,WAAA,QAAA,CAAA;AAAA,QAAA,SAAA,EAAA,KAAA,SAAA;AAAA,QAAA,OAAA,EAAA,KAAA;AAAA,OAAA;AACA;AALA;AAtDA,CAAA","sourcesContent":["<template>\n  <div>\n    <div class=\"row justify-content-center\">\n      <div class=\"col-lg-12\">\n        <div class=\"card bg-secondary shadow border-0\">\n          <div class=\"card-body px-lg-5 py-lg-5\">\n            <label\n              v-if=\"availableRoundsToVote\"\n              class=\"form-control-label\"\n              style=\"margin-right: 70px\"\n              >No available Rounds to Rate</label\n            >\n            <div v-if=\"!isOrganizer\">\n              <ContestClassicVotingRound\n                v-for=\"(round, roundId, roundIndex) in filteredStage\"\n                :key=\"roundIndex\"\n                :contestId=\"contestId\"\n                :stageId=\"stageId\"\n                :roundId=\"roundId\"\n              />\n            </div>\n            <div v-else-if=\"!availableRoundsToVote\">\n              <label class=\"form-control-label\">Judges are voting!</label>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <button\n      v-if=\"isOrganizer && isStarted\"\n      style=\"margin: 0 2rem 0 2rem; \"\n      class=\"btn btn-primary my-4\"\n      @click=\"finishVotingRound()\"\n    >\n      Finish This Stage\n    </button>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState, mapActions, mapMutations } from \"vuex\";\nimport ContestClassicVotingRound from \"@/components/ContestClassicVotingRound.vue\";\n\nexport default {\n  components: { ContestClassicVotingRound },\n\n  props: {\n    contestId: { required: true, type: String },\n    stageId: { required: true, type: Number }\n  },\n\n  computed: {\n    ...mapGetters({\n      user: \"auth/authUser\"\n    }),\n\n    ...mapState({\n      contestStatus(state) {\n        return state.contests.items[this.contestId].status;\n      },\n\n      stage(state) {\n        return state.contests.items[this.contestId].stages[this.stageId];\n      }\n    }),\n\n    isStarted() {\n      return this.contestStatus == \"started\";\n    },\n\n    isOrganizer() {\n      return this.user.role == \"organizer\";\n    },\n\n    filteredStage() {\n      let newStage = {};\n      let skip = null;\n\n      for (let [roundKey, round] of Object.entries(this.stage)) {\n        skip = false;\n        if (round.stats) {\n          for (let [playerKey, player] of Object.entries(round)) {\n            if (player.score == \"disqualified\") skip = true;\n          }\n          if (skip) continue;\n          newStage[roundKey] = round;\n        }\n      }\n\n      return newStage;\n    },\n\n    availableRoundsToVote() {\n      return Object.keys(this.filteredStage).length == 0;\n    }\n  },\n\n  methods: {\n    ...mapActions(\"contests\", [\"endStage\"]),\n\n    finishVotingRound() {\n      this.endStage({ contestId: this.contestId, stageId: this.stageId });\n    }\n  }\n};\n</script>\n\n<style scoped></style>\n"],"sourceRoot":"src/components"}]}