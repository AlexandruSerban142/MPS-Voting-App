{"remainingRequest":"/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/babel-loader/lib/index.js!/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/src/router.js","dependencies":[{"path":"/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/src/router.js","mtime":1573408857481},{"path":"/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/cache-loader/dist/cjs.js","mtime":1573384218503},{"path":"/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/babel-loader/lib/index.js","mtime":1572617092984},{"path":"/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1573384218024}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport Vue from \"vue\";\nimport store from \"@/store\";\nimport Router from \"vue-router\";\nimport Home from \"./views/PageHome.vue\";\nimport Register from \"./views/PageRegister\";\nimport SignIn from \"./views/PageSignIn\";\nimport Contest from \"./views/PageContest\";\nVue.use(Router);\nvar router = new Router({\n  mode: \"history\",\n  base: process.env.BASE_URL,\n  routes: [{\n    path: \"/\",\n    name: \"Home\",\n    component: Home\n  }, {\n    path: \"/contest/:id\",\n    name: \"Contest\",\n    component: Contest,\n    meta: {\n      requiresNotJudge: true\n    },\n    props: function props(route) {\n      return {\n        isAllowedJudge: route.query.judge,\n        id: route.params.id\n      };\n    }\n  }, {\n    path: \"/register\",\n    name: \"Register\",\n    component: Register,\n    meta: {\n      requiresGuest: true\n    }\n  }, {\n    path: \"/signIn\",\n    name: \"SignIn\",\n    component: SignIn,\n    meta: {\n      requiresGuest: true\n    }\n  }, {\n    path: \"/logout\",\n    name: \"SignOut\",\n    meta: {\n      requiresAuth: true\n    },\n    beforeEnter: function beforeEnter(to, from, next) {\n      store.dispatch(\"auth/signOut\").then(function () {\n        return next({\n          name: \"SignIn\"\n        });\n      });\n    }\n  }]\n});\nrouter.beforeEach(function (to, from, next) {\n  console.log(\"\\uD83D\\uDEA6 navigating to \".concat(to.name, \" from \").concat(from.name));\n  store.dispatch(\"auth/initAuthentification\").then(function (user) {\n    if (to.matched.some(function (route) {\n      return route.meta.requiresAuth;\n    })) {\n      if (user) {\n        next();\n      } else {\n        next({\n          name: \"SignIn\",\n          query: {\n            redirectTo: to.path\n          }\n        });\n      }\n    } else if (to.matched.some(function (route) {\n      return route.meta.requiresGuest;\n    })) {\n      if (!user) {\n        next();\n      } else {\n        next({\n          name: \"Home\"\n        });\n      }\n    } else if (to.matched.some(function (route) {\n      return route.meta.requiresNotJudge;\n    })) {\n      if (!user || user.role != \"judge\") next();\n    } else {\n      next();\n    }\n  });\n});\nexport default router;",{"version":3,"sources":["/Users/alexandruserban/Documents/Web Development/MPS/MPS-Voting-App/src/router.js"],"names":["Vue","store","Router","Home","Register","SignIn","Contest","use","router","mode","base","process","env","BASE_URL","routes","path","name","component","meta","requiresNotJudge","props","route","isAllowedJudge","query","judge","id","params","requiresGuest","requiresAuth","beforeEnter","to","from","next","dispatch","then","beforeEach","console","log","user","matched","some","redirectTo","role"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\nimport store from \"@/store\";\n\nimport Router from \"vue-router\";\nimport Home from \"./views/PageHome.vue\";\nimport Register from \"./views/PageRegister\";\nimport SignIn from \"./views/PageSignIn\";\nimport Contest from \"./views/PageContest\";\n\nVue.use(Router);\n\nconst router = new Router({\n  mode: \"history\",\n  base: process.env.BASE_URL,\n  routes: [\n    {\n      path: \"/\",\n      name: \"Home\",\n      component: Home\n    },\n\n    {\n      path: \"/contest/:id\",\n      name: \"Contest\",\n      component: Contest,\n      meta: { requiresNotJudge: true },\n      props: route => ({\n        isAllowedJudge: route.query.judge,\n        id: route.params.id\n      })\n    },\n\n    {\n      path: \"/register\",\n      name: \"Register\",\n      component: Register,\n      meta: { requiresGuest: true }\n    },\n\n    {\n      path: \"/signIn\",\n      name: \"SignIn\",\n      component: SignIn,\n      meta: { requiresGuest: true }\n    },\n\n    {\n      path: \"/logout\",\n      name: \"SignOut\",\n      meta: { requiresAuth: true },\n      beforeEnter(to, from, next) {\n        store.dispatch(\"auth/signOut\").then(() => next({ name: \"SignIn\" }));\n      }\n    }\n  ]\n});\n\nrouter.beforeEach((to, from, next) => {\n  console.log(`ðŸš¦ navigating to ${to.name} from ${from.name}`);\n\n  store.dispatch(\"auth/initAuthentification\").then(user => {\n    if (to.matched.some(route => route.meta.requiresAuth)) {\n      if (user) {\n        next();\n      } else {\n        next({ name: \"SignIn\", query: { redirectTo: to.path } });\n      }\n    } else if (to.matched.some(route => route.meta.requiresGuest)) {\n      if (!user) {\n        next();\n      } else {\n        next({ name: \"Home\" });\n      }\n    } else if (to.matched.some(route => route.meta.requiresNotJudge)) {\n      if (!user || user.role != \"judge\") next();\n    } else {\n      next();\n    }\n  });\n});\n\nexport default router;\n"]}]}